<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="Jed Rembold and Eric Roberts">
  <title>Section 13: Continuing the Adventure</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="./js/revealjs/dist/reset.css">
  <link rel="stylesheet" href="./js/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
  </style>
  <link rel="stylesheet" href="./js/revealjs/../../css/theme/monokai.css" id="theme">
  <link rel="stylesheet" href="./js/revealjs/../../css/highlight/monokai.css">
  <link rel="stylesheet" href="css/codetrace.css"/>
  <link rel="stylesheet" href="css/roberts.css"/>
</head>
<body>
  <div class="reveal">
    <div class="slides">

<section id="title-slide">
  <h1 class="title">Section 13: Continuing the Adventure</h1>
  <p class="author">Jed Rembold and Eric Roberts</p>
  <p class="date">Week of April 21st</p>
<div class="titlelinks">
<a title="Template Repo" href="https://github.com/rembold-cs151-master/Section12b"><i class="fa-solid fa-folder-tree"></i></a>
<a title="Template Zip"  href="https://github.com/rembold-cs151-master/Section12b/zipball/master/"><i class="fa-solid fa-file-zipper"></i></a>
<a title="Questions"     href="https://github.com/rembold-cs151-master/Section12b/raw/main/SectionQuestions.pdf"><i class="fa-solid fa-file-pdf"></i></a>
</div>
</section>

<section id="debugging-the-real-adventure" class="slide level2">
<h2>Debugging: The Real Adventure</h2>
<ul>
<li>As Adventure builds in complexity, your debugging skills will likely
be challenged, as there are many things to think about.</li>
<li>Code for Adventure is split across 3-4 files: how do you determine
which file is problematic?</li>
<li>Adventure makes extensive use of classes: how do you decide if the
problem is in how you are <em>using</em> the class object, or in how you
<em>defined</em> the class methods?</li>
</ul>
</section>
<section id="general-tips" class="slide level2">
<h2>General Tips</h2>
<ul>
<li><p>Whenever working on more complicated code, some general practices
can help:</p>
<div>
<ul>
<li class="fragment">Test early, test often. Write the minimal amount of
code necessary before running the program to see if that code works.
This constrains possible errors (usually) to the small piece of code
that you just wrote.</li>
<li class="fragment">Choosing strong variable names can be a lifesaver.
Naming things is difficult, but naming things well can save you hours of
frustrated debugging only to realize that you confused your
variables.</li>
<li class="fragment">Always keep a mental model (or make yourself a
picture you can refer to) about where in the program certain things are
happening. This is one reason why we break things up into classes and
separate those classes across multiple files, but if you don’t have a
mental model of what is responsible for what, this division of
responsibilities won’t help you.</li>
</ul>
</div></li>
</ul>
</section>
<section id="drilling-in" class="slide level2">
<h2>Drilling In</h2>
<ul>
<li>Error messages will tell you exactly in <em>what file</em> and
<em>what line</em> the error occurred: pay attention to this!
<ul>
<li>Keep in mind that this is where the error occurred,
<strong>not</strong> necessarily where the mistake occurred. But it is a
good starting point.</li>
<li>If you can’t find an error near this point, where else do you have
code that creates or modifies the object involved? Probably in that
object’s class definition?</li>
</ul></li>
<li>Are you getting an illegal operation error? Go to just before that
line and print out the elements involved. Something is not what you
think it is.</li>
<li>Don’t forget that you can set break points in VSCode and run the
code in debug mode! This can be easier sometimes than just using print
statements.</li>
</ul>
</section>
<section>
<section id="problem-1" class="title-slide slide level1">
<h1>Problem 1</h1>

</section>
<section id="problem-1-buggy-rewards" class="slide level2">
<h2>Problem 1: Buggy Rewards</h2>
<ul>
<li>In the materials for this section is a folder called
<code class="python">BrokenAdvTM</code>, which contains an advanced
version of the TeachingMachine where someone was trying to add a points
and reward system.</li>
<li>This implementation adds a <code class="python">TMRewards</code>
class that stores information about potential rewards that could be tied
to a problem, including the text that should display to the screen and a
points modifier.
<ul>
<li>The rewards data file is read inside the
<code class="python">TMCourse</code> constructor when a new course is
created, and every reward is randomly dispersed amongst the possible
questions.</li>
</ul></li>
<li>Unfortunately there are several mistakes in the implementation. Your
task in this problem is to identify those mistakes and fix them so that
the program runs as intended.
<ul>
<li>There are only 3 mistakes in the file, requiring only editing about
5 lines of code</li>
</ul></li>
</ul>
</section>
<section id="issue-1" class="slide level2">
<h2>Issue 1</h2>
<div>
<ul>
<li class="fragment">Likely the first issue you are faced with is about
a string having no attribute <code class="python">add_reward</code>,
which is true!</li>
<li class="fragment">It is important not to confuse the <em>name</em> of
something with the custom object <em>representing</em> that thing
<ul>
<li class="fragment">The name of a question is <strong>not</strong> the
same thing as the <code class="python">TMQuestion</code> itself</li>
</ul></li>
<li class="fragment">Possible fix?
<ul>
<li class="fragment">Use the name of the question as the key to the
questions dictionary to retrieve the actual corresponding object, and
then call <code class="python">add_reward</code> on that object</li>
</ul></li>
</ul>
</div>
</section>
<section id="issue-2" class="slide level2">
<h2>Issue 2</h2>
<div>
<ul>
<li class="fragment">The second issue you will likely face is when you
come across one of the rewarded questions (which might require a bit of
testing!) that will complain about list objects having no
<code class="python">get_text</code> attribute.</li>
<li class="fragment">The list in question is the
<code class="python">rewards</code> variable that was returned by
<code class="python">.get_rewards()</code>, which looks to contain a
list of all the rewards associated with a problem.</li>
<li class="fragment">The fix?
<ul>
<li class="fragment">Individual reward objects <strong>do</strong> have
a method <code class="python">get_text()</code>, so likely what was
desired is to loop over the rewards and print the text of each.</li>
</ul></li>
</ul>
</div>
</section>
<section id="issue-3" class="slide level2">
<h2>Issue 3</h2>
<div>
<ul>
<li class="fragment">The third issue can be subtle without good
testing.</li>
<li class="fragment">The <code class="python">rewards.txt</code> file
shows 3 rewards in it, each of which should be assigned to a question.
<ul>
<li class="fragment">Can you find them all? Or are some missing?</li>
</ul></li>
<li class="fragment">Check to ensure the objects you read in from a file
have all the expected things! Here we are missing two rewards!</li>
<li class="fragment">The culprit has to do with the empty row between
each of the rewards. Without changing the
<code class="python">rewards.txt</code> file itself, how could you fix
this?
<ul>
<li class="fragment">Explicitly read in an extra line after the
multiplier</li>
</ul></li>
</ul>
</div>
</section></section>
<section>
<section id="problem-2" class="title-slide slide level1">
<h1>Problem 2</h1>

</section>
<section id="providing-feedback" class="slide level2">
<h2>Providing feedback</h2>
<div>
<ul>
<li class="fragment">Currently, the
<code class="python">TeachingMachine.py</code> program gives no feedback
when the user gives an incorrect answer.
<ul>
<li class="fragment">Quickly brainstorm some ways you could try to
implement this? What extra data structures might you need?</li>
</ul></li>
<li class="fragment">There are many possible strategies, but the one
Will Crowther arrived at was reusing the
<code class="python">AdvRoom</code> class
(<code class="python">TMQuestion</code> here)
<ul>
<li class="fragment">Want the new “question” to display text to the
screen, but <strong>not</strong> to prompt the user for a response</li>
<li class="fragment">Instead, a <code class="python">FORCED</code>
response in the <code class="python">answers</code> dictionary indicates
that the program should <strong>immediately</strong> proceed to the
indicated question</li>
</ul></li>
</ul>
</div>
</section>
<section id="forced-questions" class="slide level2">
<h2>Forced Questions</h2>
<ul>
<li><p>An example of such a question might look like:</p>
<pre ><code class="text">Q3Resp
You forgot to divide by 2.
-----
FORCED: Q3</code></pre></li>
<li><p>Implementing this in <code class="python">TMCourse.py</code>
requires only a small change:</p>
<ul>
<li>The <code class="python">run</code> method for
<code class="python">TMCourse</code> is shown on the next slide.
Identify on what lines changes will need to be made.</li>
<li>Make the changes to allow for <code class="python">FORCED</code>
questions in the Teaching Machine.</li>
</ul></li>
</ul>
</section>
<section id="tmcourse.run" class="slide level2"
data-auto-animate="true">
<h2
data-auto-animate="true"><code class="python">TMCourse.run</code></h2>
<pre data-id="mycode"><code class="mypython" style="max-height:900px; font-size:.8em" data-line-numbers="|8-9">def run(self):
    """Steps through the questions in this course."""
    current = "START"
    while current != "EXIT":
        question = self._questions[current]
        for line in question.get_text():
            print(line)
        answers = question.get_answers()
        response = input("> ").strip().upper()
        next_question = answers.get(response, None)
        if next_question is None:
            next_question = answers.get("*", None)
        if next_question is None:
            print("I don't understand that response.")
        else:
            current = next_question</code></pre>
</section>
<section id="tmcourse.run-1" class="slide level2"
data-auto-animate="true">
<h2
data-auto-animate="true"><code class="python">TMCourse.run</code></h2>
<pre data-id="mycode"><code class="mypython" style="max-height:900px; font-size:.8em" data-line-numbers="8,11|9-10|19-20">def run(self):
    """Steps through the questions in this course."""
    current = "START"
    while current != "EXIT":
        question = self._questions[current]
        for line in question.get_text():
            print(line)
        answers = question.get_answers()
        forced_question = answers.get("FORCED", None)
        if forced_question is None:
            response = input("> ").strip().upper()
            next_question = answers.get(response, None)
            if next_question is None:
                next_question = answers.get("*", None)
            if next_question is None:
                print("I don't understand that response.")
            else:
                current = next_question
        else:
            current = forced_question</code></pre>
</section></section>
    </div>
  </div>

  <script src="./js/revealjs/dist/reveal.js"></script>

  // reveal.js plugins
  <script src="./js/revealjs/plugin/notes/notes.js"></script>
  <script src="./js/revealjs/plugin/search/search.js"></script>
  <script src="./js/revealjs/plugin/zoom/zoom.js"></script>
  // Added plugins
  <!--<script src="./js/revealjs/../plugin/chart/Chart.min.js"></script>-->
  <!--<script src="./js/revealjs/../plugin/chart/plugin.js"></script>-->
  <script src="./js/revealjs/../plugins/chalkboard/plugin.js"></script>
  <!--<script src="./js/revealjs/../plugins/menu/menu.js"></script>-->
  <!--<script src="./js/revealjs/../other_plugins/reveald3/reveald3.js"></script>,-->
  <script src="./js/revealjs/plugin/math/math.js"></script>
  <script src="./js/revealjs/plugin/highlight/highlight.js"></script>
  <script src="./js/revealjs/../python_language.js"></script>

  // Font Awesome Characters
  <script src="https://kit.fontawesome.com/4bc05635b0.js" crossorigin="anonymous"></script>

  // Code Tracing
  <script src="./js/revealjs/../codetrace.js"></script>


  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
		//autoAnimateEasing: 'ease-in',
		//autoAnimateDuration: 1.0,
		//autoAnimateUnmatched: false,
        // Display controls in the bottom right corner
        controls: true,
        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: true,
        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'bottom-right',
        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',
        // Display a presentation progress bar
        progress: true,
        // Display the page number of the current slide
        slideNumber: true,
        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,
        // Push each slide change to the browser history
        history: false,
        // Enable keyboard shortcuts for navigation
        keyboard: true,
        // Enable the slide overview mode
        overview: true,
        // Vertical centering of slides
        center: false,
        // Enables touch navigation on devices with touch input
        touch: true,
        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'default',
        // Turns fragments on and off globally
        fragments: true,
        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: true,
        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,
        // Global override for autoplaying embedded media (video/audio/iframe)
        // - null: Media will only autoplay if data-autoplay is present
        // - true: All media will autoplay, regardless of individual setting
        // - false: No media will autoplay, regardless of individual setting
        autoPlayMedia: null,
        // Global override for preloading lazy-loaded iframes
        // - null: Iframes with data-src AND data-preload will be loaded when within
        //   the viewDistance, iframes with only data-src will be loaded when visible
        // - true: All iframes with data-src will be loaded when within the viewDistance
        // - false: All iframes with data-src will be loaded only when visible
        preloadIframes: null,
        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,
        // Stop auto-sliding after user input
        autoSlideStoppable: true,
        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,
        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,
        // Hide cursor if inactive
        hideInactiveCursor: true,
        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,
        // Transition style
        transition: 'slide', // none/fade/slide/convex/concave/zoom
        // Transition speed
        transitionSpeed: 'default', // default/fast/slow
        // Transition style for full page slide backgrounds
        backgroundTransition: 'fade', // none/fade/slide/convex/concave/zoom
        // Number of slides away from the current that are visible
        viewDistance: 3,
        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,
        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1920,
        height: 1080,
        // The display mode that will be used to show slides
        display: 'block',
		math: {
		  <!--mathjax: './js/revealjs/plugin/math/katex.js',-->
		  <!--config: 'tex-mml-chtml',-->
		  <!--tex2jax: {-->
			<!--inlineMath: [['\\(','\\)']],-->
			<!--displayMath: [['\\[','\\]']],-->
			<!--balanceBraces: true,-->
			<!--processEscapes: false,-->
			<!--processRefs: true,-->
			<!--processEnvironments: true,-->
			<!--preview: 'TeX',-->
			<!--skipTags: ['script','noscript','style','textarea','pre','code'],-->
			<!--ignoreClass: 'tex2jax_ignore',-->
			<!--processClass: 'tex2jax_process'-->
		  <!--},-->
		  CommonHTML: {scale: 80},
		},
          highlight: {
            beforeHighlight: hljs => hljs.registerLanguage("mypython", function(hljs) {
              console.log(mypythondef);
              return mypythondef(hljs); } )
          },
        // reveal.js plugins
        plugins: [
		  RevealMath,
          RevealHighlight,
          RevealNotes,
          RevealSearch,
          RevealZoom,
		  RevealChalkboard,
          <!--RevealMenu,-->
          <!--Reveald3,-->
        ],
		chalkboard: {
          boardmarkerWidth: 4,
          chalkWidth: 7,
          boardmarkers : [
                  { color: 'rgba(46,52,64,1)',    cursor: 'url(' + path + 'img/boardmarker-black.png), auto'},
                  { color: 'rgba(94,129,172,1)',  cursor: 'url(' + path + 'img/boardmarker-blue.png), auto'},
                  { color: 'rgba(191,97,106,1)',  cursor: 'url(' + path + 'img/boardmarker-red.png), auto'},
                  { color: 'rgba(163,190,140,1)', cursor: 'url(' + path + 'img/boardmarker-green.png), auto'},
                  { color: 'rgba(208,135,112,1)', cursor: 'url(' + path + 'img/boardmarker-orange.png), auto'},
                  { color: 'rgba(180,142,173,1)', cursor: 'url(' + path + 'img/boardmarker-purple.png), auto'},
                  { color: 'rgba(235,203,139,1)', cursor: 'url(' + path + 'img/boardmarker-yellow.png), auto'}
          ],
          chalks: [
                  { color: 'rgba(216,222,223,0.5)',cursor: 'url(' + path + 'img/chalk-white.png), auto'},
                  { color: 'rgba(94,129,172,0.5)', cursor: 'url(' + path + 'img/chalk-blue.png), auto'},
                  { color: 'rgba(191,97,106,0.5)', cursor: 'url(' + path + 'img/chalk-red.png), auto'},
                  { color: 'rgba(163,190,140,0.5)',cursor: 'url(' + path + 'img/chalk-green.png), auto'},
                  { color: 'rgba(208,135,112,0.5)',cursor: 'url(' + path + 'img/chalk-orange.png), auto'},
                  { color: 'rgba(180,142,173,0.5)',cursor: 'url(' + path + 'img/chalk-purple.png), auto'},
                  { color: 'rgba(235,203,139,0.5)',cursor: 'url(' + path + 'img/chalk-yellow.png), auto'}
          ]
		},
		dependencies: [
            // { src: "./js/revealjs/plugin/title-footer/title-footer.js", async: true, callback: function() { title_footer.initialize({css:"./js/revealjs/plugin/title-footer/title-footer.css"}); } },
		],
      });
    </script>
  <script>
  // This is admitedly a very hacky way to achieve my pseudo code highlighting, but it works?
    function remove_bars() {
      var pseudoBlocks = document.getElementsByClassName("hljs-pseudo");
      console.log(pseudoBlocks);
      for ( var i = 0; i < pseudoBlocks.length; i++) {
        pseudoBlocks[i].innerHTML = pseudoBlocks[i].innerHTML.replaceAll("\|\|\|", "");
      }
      }
    // omg this is even more hacky now, but I need this to run after hljs has done its thing
    setTimeout(remove_bars, 100);
  </script>
    </body>
</html>
